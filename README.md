# 43기 2차 프로젝트 
#  : 콤배콤 팀(comewbackhome)

<img src="https://velog.velcdn.com/images/trtw9889/post/ebc86961-d93b-423e-ad63-88f752546517/image.png"/>


## 구현 웹페이지
- '오늘의집' 사이트를 바탕으로 커뮤니티와 커머스를 중점으로 한 웹 사이트프로젝트 구현

## 프로젝트 정보

### 프로젝트 기간
2023/03/24 ~ 2023/04/07 (약 2주)

### Front-end

| 신정호 | 문은빈 | 이기태 |

|JavaScript|React|esLint|Prettier|
| :--: | :--: | :--: | :--: |
| <img src="https://techstack-generator.vercel.app/js-icon.svg" alt="icon" width="65" height="65" /> | <img src="https://techstack-generator.vercel.app/react-icon.svg" alt="icon" width="65" height="65" />  | <img src="https://techstack-generator.vercel.app/eslint-icon.svg" alt="icon" width="65" height="65" /> | <img src="https://techstack-generator.vercel.app/prettier-icon.svg" alt="icon" width="65" height="65" /> |


### Back-end
| 임수정 | 류승준 |

|JavaScript|Nodejs|MySql|Rest|Jest|
| :--: | :--: | :--: | :--: | :--: |
| <img src="https://techstack-generator.vercel.app/js-icon.svg" alt="icon" width="65" height="65" /> |<img src="https://techstack-generator.vercel.app/nginx-icon.svg" alt="icon" width="65" height="65" /> | <img src="https://techstack-generator.vercel.app/mysql-icon.svg" alt="icon" width="65" height="65" /> | <img src="https://techstack-generator.vercel.app/restapi-icon.svg" alt="icon" width="65" height="65" /> | <img src="https://techstack-generator.vercel.app/jest-icon.svg" alt="icon" width="65" height="65" /> |

### 서비스 소개
- 타겟층 : 20-30대 이사를 준비하는 인테리어에 관심이 많은 사람
- 닉네임을 통해 커뮤니티에서 활동하면서 인테리어 소개의 창구로서 사용
- 해당 인테리어에 대한 상품을 소개함으로써 구매를 유도해 매출을 창출하는 비지니스로직 존재

## 기술 스택 및 ERD


<img src="https://velog.velcdn.com/images/trtw9889/post/30080157-f25c-4a16-9ef2-6624de4d9954/image.png"/>



## 협업 툴

* <img src="https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=Git&logoColor=white"/>
* <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=White"/>
* <img src="https://img.shields.io/badge/VSCode-007ACC?style=for-the-badge&logo=VisualStudioCode&logoColor={로고 색깔}"/>
* <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white"/>

* <img src="https://img.shields.io/badge/Trello-0052CC?style=for-the-badge&logo=Trello&logoColor=white"/>


## 주요 기능 데모 영상



| 컴포넌트                 | 기능영상                                                                                                                         | 담당 개발자                           |
| ------------------------ | ----------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------- |
| 메인 페이지              | <img src="https://user-images.githubusercontent.com/122195011/230554516-0d2a7eb7-3d0a-468c-b5a7-e620008bc710.gif" width="500" height="300" /> | - 프론트엔드 : 문은빈  <br> - 백엔드 :  임수정    |
| 카카오 소셜로그인 페이지                 | <img src="https://velog.velcdn.com/images/trtw9889/post/5d5725d0-8c84-4e80-b460-4206aa6ab13f/image.gif" width="500" height="300"/> | - 프론트엔드 :  신정호,이기태,문은빈 <br> - 백엔드 : 임수정       |
| 집들이리스트 페이지 <br> 필터 & 정렬                 | <img src="https://velog.velcdn.com/images/trtw9889/post/c817ed90-c998-4a60-9a09-14588a0fb35c/image.gif" width="500" height="300"/> | - 프론트엔드 : 문은빈 <br> - 백엔드 : 임수정   |
|집들이 상세페이지   | <img src="https://user-images.githubusercontent.com/122195011/230555816-f8b24137-2769-4a45-809e-3c29c7063aa1.gif" width="500" height="300"/> | - 프론트엔드 : 신정호 <br> - 백엔드 : 류승준       |
| 댓글&대댓글 페이지  | <img src="https://velog.velcdn.com/images/trtw9889/post/cc9408d9-00a6-47bd-aead-ea8217d07890/image.gif" width="500" height="300"/>| - 프론트엔드 : 문은빈 <br> - 백엔드 : 임수정       |
| 쇼핑리스트 페이지     | <img src="https://velog.velcdn.com/images/trtw9889/post/b2095007-93d9-42cc-8565-f438fde04191/image.gif" width="500" height="300"/>| - 프론트엔드 : 문은빈, 이기태, 신정호 <br> - 백엔드 : 임수정       |
| 쇼핑상세페이지     | <img src="https://velog.velcdn.com/images/trtw9889/post/b4106fe8-bbd7-4e58-b485-8362c4a3cb56/image.gif" width="500" height="300"/>| - 프론트엔드 : 신정호 <br> - 백엔드 : 류승준      |
| 장바구니         | <img src="https://velog.velcdn.com/images/trtw9889/post/901c81cc-fb3e-4075-a75e-a7cb9c8d8397/image.gif" width="500" height="300"/> | - 프론트엔드 : 이기태 <br> - 백엔드 : 임수정, 류승준        |
| 주문&결제페이지     | <img src="https://velog.velcdn.com/images/trtw9889/post/6fe4b895-d60b-44c0-9ad0-24df7175be07/image.gif" width="500" height="300"/> | - 프론트엔드 : 신정호 <br> - 백엔드 : 임수정       |




## 주요 기능 설명

### [FRONTEND]

#### 1. 로그인
- 카카오 소셜로그인을 활용하여 기능 구현
- 로그인 시 카카오로부터 인증인가 코드와 카카오token을 받아 BACKEND에게 token을 전달 후 BACKEND로부터 자체 token과 카카오에서 제공해주는 프로필사진과 닉네임을 받아와 활용

#### 2. 메인 페이지 (캐러셀)
- 캐러셀을 2단으로 분리하여 집들이관련 이미지 및 홍보 포스터 노출
- 집들이 상세와 연결된 캐러셀 이미지를 구현하고 이미지를 클릭하면 해당 상세페이지로 이동할 수 있도록 기능 구현
- 캐러셀 하단에 상품 리스트를 일부 리스팅 하고  상품 8개를 제한 노출, 더보기 버튼 클릭 시 상품리스트 페이지로 이동 가능하게 기능 구현(동적 라우팅 적용)

#### 3. Nav
- LocalStorage 의 token 유무에 따라 UI 구현
- 로그인 전 : 로그인 회원가입 버튼 구현
- 로그인 후 : 프로필 사진 닉네임 로그아웃 버튼 구현

#### 4. 상품 및 집들이 리스트 페이지 (페이지네이션, 필터, 정렬)
- 상품 리스트: 페이지네이션 기능을 통해 한페이지에 8개씩 상품을 노출하고 하단의 페이지 이동 숫자를 클릭시 통신을 통해 페이지에 해당하는 8개의 상품의 데이터를 받아와 상품 리스팅(grid를 활용하여 정렬)
- 리스트에서 해당 이미지 클릭 시 동적라우팅을 통해 상세페이지로 이동할 수 있도록 구현
- 집들이 리스트: 최신순 및 추천순으로 집들이 리스트를 정렬하고 평수에 맞게 상품을 필터링하여 사용자가 선택한 리스트의 데이터에 따라 데이터를 필터링하여 UI가 다르게 그려지도록 구현
- 리스트에서 해당 이미지 클릭 시 동적라우팅을 통해 상세페이지로 이동할 수 있도록 구현

#### 5. 상품 상세 페이지
- 동적 라우팅을 통해 해당 id 값을 가진 제품의 내용이 그려지도록 구현
- input창, - + 버튼으로 수량 제어
- 수량을 해당 제품의 재고보다 높게 설정 할수 없도록 구현 및 텍스트화
- 사용자가 아예 재고를 선택하지 않고(빈 값) 장바구니 or 주문하기 버튼 클릭시 모달창에 오류 메시지 나오도록 구현
- 정상적인 수량을 선택 후 장바구니 or 주문하기 버튼 클릭시 해당 페이지의 이동 유무를 선택 할 수 있게 해주는 모달창 구현 이떄 해당 페이지로 이동하지 않아도 사용자가 선택한 물품은 장바구니에 담기도록 구현

#### 6. 집들이 상세 페이지
- 집들이 상세 페이지 내 집들이 미리보기 이미지 호버:이미지 마커 라이브러리를 이용하여 이미지에 마우스 hover시 백엔드에서 보내주는 좌표값에 +버튼이 나오도록 구현
- +버튼 클릭시 해당 제품의 상세페이지로 이동
- +버튼을 한번 더 마우스 hover 시 상품의 상세정보가 나오도록 구현
- 제품 이미지 마우스 hover시 제품 id값을 축출하여  같은 id값을 가지고 있는 +버튼,제품 상세정보가 나오도록 구현
- 댓글: 기존 해당 페이지에 있는 댓글을 통신을 통해 데이터를 받아와 사용자가 댓글을 작성하면 기존 데이터의 배열에 객체 형태로 가공된 작성된 댓글을 추가하여 map을 통해 각각의 객체를 댓글로 UI구현
- 로그인 시 받아온 닉네임 및 프로필이미지를 활용하여 댓글 작성시 나오는 사용자이미지와 프로필사진으로 활용
- 대댓글: 통신을 통해 받아오는 댓글 데이터 정보의 형태는 하나의 객체 형태로 댓글 안에 대댓글의 배열이 들어가 있는 형태이므로 대댓글을 작성하면 부모 컴포넌트에서 State로 관리하고 있는 댓글 데이터를 자식 컴포넌트에서 props를 받아와 활용
- 댓글 안의 대댓글의 배열에 객체 형태로 가공된 작성된 댓글을 추가하여 map을 통해 각각의 객체를 대댓글로 UI구현
- 대댓글을 작성 할 경우 부모 댓글의 commentID와 동일하게 대댓글의 commentID를 동일하게 데이터를 적용하여 해당 대댓글의 위치를 잡아 UI구현
- 로그인 시 받아온 닉네임 및 프로필이미지를 활용하여 댓글 작성시 나오는 사용자이미지와 프로필사진으로 활용
- 댓글과 대댓글은 token이 있을 경우 작성 할 수있도록 기능 구현

#### 7. 장바구니
- LocalStorage 의 token 있을때만 장바구니에 접근 가능
- checkbox와 count button을 컴포넌트로 분리해서 각각 독립적으로 작동하도록 기능 구현
- checkbox에 check 된 data만 결제 창에 반영 될수 있도록 기능 구현
- checkbox에 check 된 id중 일치된 id만 delete button 기능 구현

#### 8. 주문, 결제 페이지
- 주문자의 닉네임과 이메일이 화면에 그려지도록 구현
- 장바구니에 담긴 상품리스트를 주문상품에 그려지도록 구현
- 백엔드에서 보내주는 포인트를  input, 버튼을 통해 사용자가 사용할 포인트 제어 할 수 있도록 구현
- 결제하기 버튼을 통해 주문자가 작성하는 이름,전화번호,주소를 backend로 post하는 동시에 통신이 성공하면 3초뒤 메인페이지로 이동하도록 구현

#### 9. Footer
- 아이콘 클릭 시 팀 프로젝트에서 활용한 git, notion, trello 페이지로 이동가능 하도록 기능 구현


### [BACKEND]

#### 1.카카오 소셜로그인
 - 카카오토큰을 통해 회원여부를 판단하여 없을 때 가입후 로그인 하는 로직 구현
 - jwt톤큰을 발급하여 Frontend에 전달

#### 2. 집들이 리스트
- 데이터 필터링, 정렬, 페이지네이션 적용하여 옵션별로 호출
- 클래스를 이용한 쿼리빌드 사용

#### 3. 집들이 상세 페이지
- JSON 메소드를 사용하여 집들이 정보 & 상품 정보데이터를 조합해 해당상품에 맞는 데이터를 불러와 Frontend에 전달

#### 4. 댓글&대댓글
- SELF JOIN을 활용하여 쿼리문 작성 및 대댓글을 구현
- 상세페이지에 들어갔을 때 한번에 댓글&대댓글을 불러오며 댓글의 갯수를 구해 Frontend에 데이터 전달

#### 5. 쇼핑 리스트
- offset, limit를 사용하여 페이지네이션 적용
- 클래스를 이용한 쿼리빌드 사용
- 같은함수를 사용하여 메인페이지에도 쇼핑리스트에 대한 정보 Frontend에 전달

#### 6. 쇼핑 상세 페이지
- INNER & OUTER JOIN을 사용하여 데이터를 조합해 해당상품에 맞는 데이터를 불러와 Frontend에 전달

#### 7. 장바구니
- 데이터를 조합하여 로그인한 회원의 장바구니 데이터 불러오는 기능구현(INNER JOIN사용)
- 장바구니페이지에서 수량 업데이트 및 삭제 기능구현
- 재고수량보다 많은 수량을 담을 수 없도록 에러핸들링 구현(CREATE&UPDATE 모두적용)

#### 8. 주문 & 결제
- 장바구니 내역 조회해 데이터를 불러오는 기능구현
- 장바구니에 담긴 금액만큼 포인트를 지급하고 결제시 결제금액만큼 차감하는 로직구현
- 트랜잭션(transaction) 도입을 통한 거래 전체 성공/취소 기능 구현

